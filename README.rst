=========
bibupdate
=========

**Usage:** bibupdate_ <file.bib>

This script is a command line tool for updating the entries in a BibTeX_ file
using mrlookup_. By default bibupdate_ tries to find an updated entry for each
paper unless the entry already has an **mrnumber** field (you can disable future
checking of an entry by giving it an empty **mrnumber** field).

**Options**::

  -a, --all                   Check ALL BibTeX entries against mrlookup
  -h, --help                  Show this help message and exit
  -f, --font_replace          Do not replace fonts \\germ and \\scr
  -i IGNORE, --ignore=IGNORE  A string of BibTeX_ fields to ignore when printing
  -q, --quiet                 Print almost no messages when updating entries
  -w  --warnings              Print only warnings when updating entries
  -v, --version               Print version and exit

**Note:** bibupdate_ does not change your original database file. Instead, it creates a
new file with the name *updated_file.bib*, if your original file was *file.bib*.
As described below, you should check the new file for errors before deleting the
original version of your bibtex_ file.

This script attempts to add missing fields to the papers in a BibTeX_ database
file by querying mrlookup_ and getting the missing information from there. This
is not completely routine because to search on mrlookup_ you need either the
authors or the title of the article and both of these can have non-standard
representations. If the article is already published then it is also possible to
use the publication year and its page numbers. To search on mrlookup_ we::

- use the authors (can be problematic with names with von etc)
- use the page numbers, if they exist
- use the year only if there are no page numbers and this is NOT a preprint
- use the title if there are no page numbers (or this is a book)

If there is a unique match from mrlookup_ then bibupdate_ replaces all of the
current entries with those from mrlookup_, except for the citation key. The
values of any fields that are not specified by mrlookup_, such as eprint fields,
are retained. By default, a message is printed whenever existing fields in the
database are changed. If the title of the retrieved paper does not (fuzzily)
match that of the original article then the entry is NOT updated and a warning
message is printed.

Although some care is taken to make sure that the new BibTeX_ entries correspond
to the same paper that the original entry referred to there is always a chance
the new entry corresponds to an entirely different paper because. In my
experience this happens only rarely, and mostly with unpublished manuscripts. In
any case, before you delete you original BibTeX_ file *you are strongly advised
to check the updated file BibTeX_ file carefully for errors!*

To help with comparing the updated entries the program prints a detailed list of
all changes that are made to existing BibTeX_ entries (the new fields added to
an entry are not printed). Once bibupdate_ has finished it is recommended that
you compare the old and new versions of your database with programs like *diff*
and *tkdiff*.

I wrote this script because, using hyperref_, I wanted to automatically add
links to journals, the arXiv_ and DOIs to the bibliographies of my papers. This
script allowed me to add the missing urls and DOI fields to my BibTeX_ database.
As a bonus the script helped me to correct many minor errors that I had crept
into my BibTeX_ file over the years (for example, incorrect page numbers and
years). The program is still useful because it is quite successful in updating
the preprint entries in my database when the papers are published.

As bibupdate_ calls mrlookup_ this program will only be useful if you have
papers in your database that are listed in MathSciNet_.

Options and their defaults
--------------------------

Most of the options are described above. Here is a little extra detail when it
is not so obvious.

-a, --all                   Check ALL BibTeX_ entries against mrlookup

  By default bibupdate_ only checks each BibTeX_ entry with the mrlookup
  database if the entry does *not* have an **mrnumber** field. With this switch
  all entries are checked and updated.

-f, --font_replace          Do not replace fonts \\germ and \\scr

  The BibTeX_ entries generated by mrlookup_ use \\Bbb, \\germ and \\scr for the \\mathbb,
  \\mathfrak and \\mathscr fonts. By default, these fonts specifications are automatically
  changed to the following more LaTeX_ friendly font specifications:

        - \\Bbb X  --> \\mathbb{X}
        - \\scr X  --> \\mathscr{X}
        - \\germ X --> \\mathfrak{X}

  The -f option *disables* these substitutions.

-i IGNORE, --ignore=IGNORE  A string of BibTeX_ fields to ignore when printing

  By default bibupdate_ removes the following fields from each BibTeX_ entry::

  - coden
  - mrreviewer
  - fjournal
  - issn

  This list can be changed using the -i command line option::

  .. bibupdate -i "coden fjournal" file.bib  # ignore just coden and fjournal
  .. bibupdate -i "" file.bib                # do not ignore any fields

-q, --quiet                 Do not print a list of changes (default off)
-w, --warnings              Print only warnings when replacing BibTeX_ entries

  There are three levels of verbosity in how bibupdate_ describes the changes that
  it is making. By default all additions to the BibTeX_ entry are printed (to stdout).
  In addition, bibupdate_ will tell you when it *is not* able to find the paper
  on mrlookup_ (either because there are no matches or because there are too
  many). If it is not able to find the paper in the mrlookup_ database and
  bibupdate_ thinks that the paper is not a preprint then it will mark the
  missing entry with an exclamation mark, to highlight that it thinks that it
  should have found the entry in mrlookup_ but failed. Here is some sample output::

     Missed Webster:CanonicalBasesHigherRep: Canonical bases and higher representatio
    -Found updated entry for Weyl
      publisher: Princeton University Press
              -> Princeton University Press, Princeton, NJ
     Missed Williamson:JamesLusztig: Schubert calculus and torsion
    !Missed QSAII: On Quantitative Substitutional Analysis

  Each bibtex_ entry is identified by the citation key and the document title,
  as specified by your database. Of the three missed entries above, bibupdate_
  thinks that the first two are preprints (they are not marked with an !), that
  the final one should already have been published. With the entry that
  bibupdate_ found, only the publisher entry was changed so that it includes the
  city of the publisher.

  In *warning mode*, with the -w option,  you are just "warned" when changes are
  being made to an entry. That is, when papers are found (with changes) or when
  they are missed and bibupdate_ thinks that they are not preprints. In *quiet
  mode*, with the -q option, the program only reports when something goes wrong.


Installation
============

There are two installation routes.

1. From the command line type::

      pip install http://bitbucket.org/AndrewsBucket/bibupdate/downloads/bibupdate-1.1.tar.gz

2. Clone or download_ this repository, change directory into it and then
   run *pip* or *easy_install*::

      pip setup.py install


Context
-------
BibTeX_ is used by the LaTeX_ community to maintain publication databases.

AUTHOR
------
Copyright (C) 2012-14 Andrew Mathas
GNU General Public License, Version 3, 29 June 2007

This program is free software: you can redistribute it and/or modify it under
the terms of the GNU_General Public License (GPL_) as published by the Free
Software Foundation, either version 3 of the License, or (at your option) any
later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.  See the GNU General Public License for more details.

.. _BibTeX: http://www.bibtex.org/
.. _GPL: http://www.gnu.org/licenses/gpl.html
.. _LaTeX: http://en.wikipedia.org/wiki/LaTeX
.. _MathSciNet: http://www.ams.org/mathscinet/
.. _arXiv: http://arxiv.org/
.. _bibupdate: https://bitbucket.org/aparticle/bibupdate
.. _hyperref: http://www.ctan.org/pkg/hyperref
.. _mrlookup: http://www.ams.org/mrlookup
.. _download: http://bitbucket.org/AndrewsBucket/bibupdate/downloads/

=========
bibupdate
=========

**Usage:** bibupdate_ <file.bib>

This script is a command line tool for updating the entries in a BibTeX_ file
using mrlookup_. By default bibupdate_ tries to find an updated entry for each
paper unless the entry already has an **mrnumber** field (you can disable future
checking of an entry by giving it an empty **mrnumber** field).

**Options**::

  -a, --all                   Check ALL BibTeX entries against mrlookup
  -h, --help                  Show this help message and exit
  -f, --font                  Do not replace fonts \germ and \scr
  -i IGNORE, --ignore=IGNORE  A string of BibTeX_ fields to ignore when printing
  -n, --no_warnings           Do not print warnings when replacing BibTeX entries
  -q, --quiet                 Do not print a list of changes (default on)
  -v, --version               Print version and exit

bibupdate_ does not change your originl database file. Instead, it creates a
new file with the name *updated_file.bib*, if your original file was *file.bib*.
As described below, you should check the new file for errors.

This script attempts to add missing fields to the papers in a BibTeX_ database
file by querying mrlookup_ and getting the missing information from there. This
is not completely routine because to search on mrlookup_ you need either the
authors or the title of the article and both of these can have non-standard
representations. If the article is already published then it is also possible to
use the publication year and its page numbers. To search on mrlookup_ we::

- use the authors (can be problematic with names with von etc)
- use the page numbers, if they exist
- use the year only if there are no page numbers and this is NOT a preprint
- use the title if there are no page numbers (or this is a book)

If there is a unique match from mrlookup_ then bibupdate_ replaces all of the
current entries with those from mrlookup_, except for the citation key. The
values of any fields that are not specified by mrlookup_, such as eprint fields,
are retained. In the default verbose mode all of the changes to the fields are
printed. If the title of the retrieved paper does not (fuzzily) match that of
the original article then the entry is NOT updated and a warning message is
printed.

Although some care is taken to make sure that the new BibTeX_ entries correspond
to the same paper that the original entry referred to there is always a chance
the new entry corresponds to an entirely different paper because. In my
experience this happens only rarely, and mostly with unpublished manuscripts. In
any case, before you delete you original BibTeX_ file *you are strongly advised
to check the updated file BibTeX_ file carefully for errors!*

To help with comparing the updated entries in *verbose* mode, the default, the
program prints a detailed list of the changes that are being made to existing
BibTeX_ entries (the new fields added to an entry are not printed). Comparing the
old and new versions of your database with programs like *diff* and *tkdiff* is
highly recommended.

I wrote this class because with the advent of hyperref_ I wanted to add links to
journals, the arXiv_ and DOIs in the bibliographies of my papers.  This script
allowed me to add the missing urls and DOI fields to my BibTeX_ database. As a
bonus the script corrected many minor errors that I had crept into my \BibTeX_
file over the years (for example, incorrect page numbers and years). The program
is still useful because it is quite successful in updating the preprint entries
in my database when the papers are published.

As bibupdate_ calls mrlookup_ this program will only be useful if you have
papers in your database that are listed in MathSciNet_.

Options and their defaults
--------------------------

Most of the options are described above. Here is a little extra detail when it
is not so obvious.

-a, --all                   check ALL BibTeX_ entries against mrlookup

  By default bibupdate_ only checks each BibTeX_ entry with the mrlookup
  database if the entry does *not* have an **mrnumber** field. With this switch
  all entries are checked and updated.

-f, --font                  do not replace fonts \germ and \scr

  The BibTeX_ entries generated by mrlookup_ use \germ and \scr for the mathfrak 
  and and mathscr fnonts. By default these two fonts specfications are changed 
  to \mathfrak and \mathscr, respectively. The *-f* option disables this.

-q, --quiet                 Do not print a list of changes (default on)
-n, --no_warnings           do not print warnings when replacing BibTeX_ entries

  There are two levels of verbosity in how bibupdate_ describes the changes that
  it is making. By default all additions to the BibTeX_ entry are printed (to stdout).
  In addition, bibupdate_ will tell you when it *is not* able to find the paper
  on mrlookup_ (either because there are no matches or because there are too
  many). If it is not able to find the paper in the mrlookup_ database and
  bibupdate_ thinks that the paper is not a preprint then it will mark the
  missing entry with an exclamation mark. Here is some sample output::

     Missed Webster:CanonicalBasesHigherRep: Canonical bases and higher representatio
    -Found updated entry for Weyl
      publisher: Princeton University Press
              -> Princeton University Press, Princeton, NJ
     Missed Williamson:JamesLusztig: Schubert calculus and torsion
    !Missed QSAII: On Quantitative Substitutional Analysis

  Of the three missed entries, bibupdate_ thinks that the first two are
  preprints and that the final one should have been published. With the one
  entry that bibupdate_ found it updated only the publisher entry to include the
  city of the publisher.

  In *quiet* mode you are just "warned" when changes are being made to an entry
  That is, when papers are found (with changes) or when they are missed and
  bibupdate_ thinks that they are not preprints. If the warnings are turned off
  then you are on your own.

-i IGNORE, --ignore=IGNORE  A string of BibTeX_ fields to ignore when printing

  By default bibupdate_ removes the following fields from each BibTeX_ entry::

  - coden
  - mrreviewer
  - fjournal
  - issn

  This list can be changed using the -i command line option::

  .. bibupdate -i "coden fjournal" file.bib  # ignore just coden and fjournal
  .. bibupdate -i "" file.bib                # do not ignore any fields


Installation
============

There are two installation routes.

1. From the command line type::

      pip install http://bitbucket.org/AndrewsBucket/bibupdate/downloads/bibupdate-1.1.tar.gz

2. Clone or download this repository, change directory into it and then
   run *pip* or *easy_install*::

      pip setup.py install


To do
-----
* Continuing searching or find the best match when mrlookup_ returns multiple entries.
* Allow search fields to be specified.

Context
-------
BibTeX_ is used by the LaTeX_ community to maintain publication databases.

AUTHOR
------
Copyright (C) 2012-14 Andrew Mathas
GNU General Public License, Version 3, 29 June 2007

This program is free software: you can redistribute it and/or modify it under
the terms of the GNU_General Public License (GPL_) as published by the Free
Software Foundation, either version 3 of the License, or (at your option) any
later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.  See the GNU General Public License for more details.

.. _BibTeX: http://www.bibtex.org/
.. _GPL: http://www.gnu.org/licenses/gpl.html
.. _LaTeX: http://en.wikipedia.org/wiki/LaTeX
.. _MthSciNet: http://www.ams.org/mathscinet/
.. _arXiv: http://arxiv.org/
.. _bibupdate: https://bitbucket.org/aparticle/bibupdate
.. _hyperref: http://www.ctan.org/pkg/hyperref
.. _mrlookup: http://www.ams.org/mrlookup
